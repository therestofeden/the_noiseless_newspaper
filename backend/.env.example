# The Noiseless Newspaper - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Application
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# Database
# =============================================================================
# SQLite for local development
DATABASE_URL=sqlite+aiosqlite:///./data/noiseless.db

# PostgreSQL for production (Supabase)
# Get connection string from: Supabase Dashboard -> Settings -> Database -> Connection string -> URI
# Use the "Transaction" pooler for the app, "Session" for migrations
# DATABASE_URL=postgresql+asyncpg://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres

# =============================================================================
# Supabase (for production auth and database)
# =============================================================================
# Get these from: Supabase Dashboard -> Settings -> API
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=

# =============================================================================
# Frontend URL (for CORS)
# =============================================================================
FRONTEND_URL=http://localhost:5173

# =============================================================================
# API Keys (all optional - uses mock data if not provided)
# =============================================================================

# Academic Sources
# Semantic Scholar - Get key at https://www.semanticscholar.org/product/api
SEMANTIC_SCHOLAR_API_KEY=

# OpenAlex - No key needed (free and open)

# News Sources
# NewsAPI - Get key at https://newsapi.org/
NEWSAPI_KEY=

# GNews - Get key at https://gnews.io/
GNEWS_API_KEY=

# =============================================================================
# Embeddings
# =============================================================================
# OpenAI - Get key at https://platform.openai.com/
# If not provided, uses local sentence-transformers model
OPENAI_API_KEY=
USE_OPENAI_EMBEDDINGS=false
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Local embedding model (used if OpenAI key not provided)
EMBEDDING_MODEL=all-MiniLM-L6-v2

# =============================================================================
# LLM for Summarization
# =============================================================================
# Anthropic - Get key at https://console.anthropic.com/
ANTHROPIC_API_KEY=

# =============================================================================
# Ranking Algorithm Weights
# =============================================================================
# Must sum to 1.0
WEIGHT_CITATION_SCORE=0.35
WEIGHT_RECENCY=0.20
WEIGHT_TOPIC_RELEVANCE=0.30
WEIGHT_USER_VOTES=0.15

# Time-weighted vote importance
VOTE_WEIGHT_1_WEEK=0.15
VOTE_WEIGHT_1_MONTH=0.35
VOTE_WEIGHT_1_YEAR=0.50

# =============================================================================
# Batch Job Settings
# =============================================================================
# When to run daily ingestion (UTC)
BATCH_JOB_HOUR=4
BATCH_JOB_MINUTE=0

# How many articles to fetch per topic per source
ARTICLES_PER_TOPIC_PER_SOURCE=50

# Minimum citations for academic articles (cold start filter)
MIN_CITATIONS_ACADEMIC=5

# =============================================================================
# PageRank Settings
# =============================================================================
PAGERANK_DAMPING=0.85
PAGERANK_ITERATIONS=100
